{"version":3,"file":"home.component.js","sourceRoot":"","sources":["../../../src/app/pages/home/home.component.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,SAAS,EAAU,KAAK,EAAE,MAAM,eAAe,CAAC;AACzD,OAAO,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AAEjD,OAAO,EAAE,WAAW,EAAE,MAAM,4BAA4B,CAAC;AAEzD,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAmC7C,MAAM,oBAAqB,SAAQ,WAAW;;;;;IAM5C,YACU,QACA;QAER,KAAK,EAAE,CAAC;QAHA,WAAM,GAAN,MAAM;QACN,iBAAY,GAAZ,YAAY;;KAIrB;;;;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC;YAC5C,IAAI,CAAC,IAAI,qBAAG,CAAuB,CAAA,CAAC;SACrC,CAAC,CAAC;KACJ;;;;;IAED,OAAO,CAAC,IAAW;QACjB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAChC;;;;;IAED,YAAY,CAAC,IAAW;QACtB,GAAG,CAAC,CAAC,qBAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YACjD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBAC9B,KAAK,CAAC;aACP;SACF;KACF;;;;IAED,QAAQ;QACN,IAAI,CAAC,YAAY;aACd,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;aACzC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;aACzB,SAAS,CAAC,CAAC,CAAqB;YAC/B,GAAG,CAAC,CAAC,qBAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACzC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;aACpC;YACD,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,CAAC;SACrC,CAAC,CAAC;KACN;;;YA3EF,SAAS,SAAC;gBACT,QAAQ,EAAE,UAAU;gBACpB,QAAQ,EAAE;;;;;;;;;;CAUX;gBACC,MAAM,EAAE,CAAC;;;;;;;;;;;;;;;;;CAiBV,CAAC;aACD;;;;YAtCQ,cAAc;YAId,WAAW;;;uBAsCjB,KAAK;uBACL,KAAK","sourcesContent":["import { Component, OnInit, Input } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport { AutoDestroy } from './shared/base/auto.destroy';\r\nimport { IPagination, IPost } from './theme/models/hhd-model';\r\nimport { HomeService } from './home.service';\r\nimport { AfterViewInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  template: `<div class=\"center\">\r\n  <app-post-item (addItem)=\"addItem($event)\" [userId]=\"userId\" [postId]=\"postId\"></app-post-item>\r\n  <app-wall-item (deleteAction)=\"deleteAction($event)\" *ngFor=\"let item of data.result\" [post]=\"item\"></app-wall-item>\r\n  <div class=\"text-c\" *ngIf=\"data.totalCount > data.result.length\">\r\n    <button mat-mini-fab color=\"accent\">\r\n      <mat-icon matTooltip=\"輸入\" (click)=\"loadMore()\">expand_more</mat-icon>\r\n    </button>\r\n  </div>\r\n</div>\r\n<app-navbar></app-navbar>\r\n`,\r\n  styles: [`.center {\n  margin: 7% auto 0 auto;\n  width: 667px; }\n\n@media screen and (max-width: 1280px) {\n  .center {\n    margin: 10% auto 0 auto; } }\n\n@media screen and (max-width: 768px) {\n  .center {\n    margin: 15% auto 0 auto;\n    width: 100%; } }\n\n@media screen and (max-width: 666px) {\n  .center {\n    margin: 30% auto 0 auto;\n    width: 100%; } }\n`]\r\n})\r\nexport class HomeComponent extends AutoDestroy implements OnInit {\r\n  data: IPagination<IPost>;\r\n\r\n  @Input() userId: string;\r\n  @Input() postId: string;\r\n\r\n  constructor(\r\n    private _route: ActivatedRoute,\r\n    private _homeService: HomeService\r\n  ) {\r\n    super();\r\n    // this.data = this._route.snapshot.data['data'];\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._homeService.get(this.postId).subscribe(x => {\r\n      this.data = x as IPagination<IPost>;\r\n    });\r\n  }\r\n\r\n  addItem(item: IPost) {\r\n    this.data.result.unshift(item);\r\n  }\r\n\r\n  deleteAction(item: IPost) {\r\n    for (let i = 0; i < this.data.result.length; i++) {\r\n      if (this.data.result[i].id === item.id) {\r\n        this.data.result.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  loadMore() {\r\n    this._homeService\r\n      .get(this.postId, this.data.result.length)\r\n      .takeUntil(this._destroy$)\r\n      .subscribe((x: IPagination<IPost>) => {\r\n        for (let i = 0; i < x.result.length; i++) {\r\n          this.data.result.push(x.result[i]);\r\n        }\r\n        this.data.totalCount = x.totalCount;\r\n      });\r\n  }\r\n}\r\n"]}