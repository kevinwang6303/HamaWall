{"version":3,"file":"wall-item.component.js","sourceRoot":"","sources":["../../../../src/app/pages/home/wall-item/wall-item.component.ts"],"names":[],"mappings":";;;;AACA,OAAO,EACL,SAAS,EAET,KAAK,EACL,MAAM,EACN,YAAY,EACZ,YAAY,EAEZ,SAAS,EACT,YAAY,EAEb,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,eAAe,EAAE,MAAM,qBAAqB,CAAC;AACtD,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;AA8I1D,MAAM,wBAAyB,SAAQ,WAAW;;;;IAYhD,YAAoB,gBAAiC;QACnD,KAAK,EAAE,CAAC;QADU,qBAAgB,GAAhB,gBAAgB,CAAiB;;4BAN5B,IAAI,YAAY,EAAE;KAQ1C;;;;IAED,QAAQ,MAAK;;;;IAEb,eAAe;QACb,IAAI,CAAC,SAAS,EAAE,CAAC;KAClB;;;;;IAGO,QAAQ,CAAC,KAAK;QACpB,IAAI,CAAC,SAAS,EAAE,CAAC;;;;;IAInB,UAAU;QACR,IAAI,CAAC,gBAAgB;aAClB,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;aACxB,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;aACzB,SAAS,CAAC,CAAC;YACV,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACnC,CAAC,CAAC;KACN;;;;IAGD,KAAK;;QAEH,uBAAM,IAAI,GAAc;YACtB,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;YACpB,MAAM,EAAE,eAAe;YACvB,OAAO,EAAE,IAAI,CAAC,WAAW;SAC1B,CAAC;QACF,IAAI,CAAC,gBAAgB;aAClB,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC;aACnB,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC;aACzB,SAAS,CAAC,CAAC,IAAW;YACrB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC3B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;SACvB,CAAC,CAAC;KACN;;;;IAED,SAAS;QACP,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;;YAExB,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC;SAC5D,CAAC,CAAC;KACJ;;;YAvMF,SAAS,SAAC;gBACT,QAAQ,EAAE,eAAe;gBACzB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAqEX;gBACC,MAAM,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkEV,CAAC;aACD;;;;YA9IQ,eAAe;;;qBAkJrB,KAAK;6BAGL,MAAM;4BAIN,YAAY,SAAC,aAAa;yBAY1B,YAAY,SAAC,eAAe,EAAE,CAAC,QAAQ,CAAC","sourcesContent":["import { IPostInfo } from '../post-item/post-item.service';\r\nimport {\r\n  Component,\r\n  OnInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  HostListener,\r\n  ElementRef,\r\n  QueryList,\r\n  ViewChildren,\r\n  AfterViewInit\r\n} from '@angular/core';\r\nimport { IPost } from '../theme/models/hhd-model';\r\nimport { WallItemService } from './wall-item.service';\r\nimport { AutoDestroy } from '../shared/base/auto.destroy';\r\n\r\n@Component({\r\n  selector: 'app-wall-item',\r\n  template: `<mat-card class=\"card\">\r\n  <mat-card-header>\r\n    <mat-card-title>{{ post.userId }}</mat-card-title>\r\n    <mat-card-subtitle>{{ post.time | date:'yyyy/MM/dd' }}</mat-card-subtitle>\r\n    <img mat-card-avatar src=\"assets/images/evan.jpg\" />\r\n    <button mat-icon-button class=\"card-action\" [matMenuTriggerFor]=\"menu\">\r\n      <mat-icon>more_vert</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"deleteItem()\">刪除</button>\r\n    </mat-menu>\r\n  </mat-card-header>\r\n\r\n  <img *ngIf=\"post.files.length === 1\" mat-card-image [src]=\"'http://localhost:50696/' + post.files[0].url\"/>\r\n\r\n  <carousel-container *ngIf=\"post.files.length > 1\">\r\n\r\n    <section carousel-items-container class=\"pane-container\">\r\n\r\n      <article class=\"pane\" *ngFor=\"let avatar of post.files; let i = index;\"\r\n      carousel-item\r\n      #articleList\r\n      [style.backgroundImage]=\"('http://localhost:50696/' + avatar.url) | safe:'background-image'\"\r\n      >\r\n      </article>\r\n\r\n      <!-- <img carousel-item class=\"magin-size\" mat-card-image *ngFor=\"let item of post.files\" [src]=\"'http://localhost:50696/' + item.url\"\r\n      /> -->\r\n\r\n    </section>\r\n\r\n    <ng-template #carouselPrev>\r\n      <mat-icon class=\"icon\">keyboard_arrow_left</mat-icon>\r\n    </ng-template>\r\n\r\n    <ng-template #carouselNext>\r\n      <mat-icon class=\"icon\">keyboard_arrow_right</mat-icon>\r\n    </ng-template>\r\n\r\n    <ng-template #carouselDot let-model>\r\n      <div class=\"ball\" [class.visible]=\"model.index === model.currentIndex\"></div>\r\n    </ng-template>\r\n\r\n  </carousel-container>\r\n\r\n  <div>\r\n    <mat-icon class=\"cursor-pointer  magin-right1em\">favorite_border</mat-icon>\r\n    <mat-icon class=\"cursor-pointer\">chat_bubble_outline</mat-icon>\r\n  </div>\r\n  <mat-card-content class=\"content\">\r\n    <p class=\"reply\">\r\n      <strong>{{ post.userId }}：</strong>\r\n      <span>{{ post.content }}</span>\r\n    </p>\r\n    <p class=\"reply\" *ngFor=\"let item of post.reply\">\r\n      <strong>{{ item.userId }}：</strong>\r\n      <span>{{ item.content }}</span>\r\n    </p>\r\n    <p class=\"load-more\">{{ post.time | agoTime }}</p>\r\n    <!-- <p class=\"load-more\">載入更多留言</p> -->\r\n  </mat-card-content>\r\n\r\n  <mat-card-footer class=\"footer\" fxLayoutAlign=\"center\">\r\n    <textarea class=\"reply-input\" placeholder=\"留言........\" [(ngModel)]=\"textContent\"></textarea>\r\n    <button mat-icon-button color=\"primary\" (click)=\"reply()\">\r\n      <mat-icon>send</mat-icon>\r\n    </button>\r\n  </mat-card-footer>\r\n</mat-card>\r\n`,\r\n  styles: [`.card {\n  margin-bottom: 2em; }\n  .card .card-action {\n    position: absolute;\n    right: 0;\n    margin-right: 2em; }\n  .card .magin-right1em {\n    margin-right: 1em; }\n  .card .load-more {\n    cursor: pointer;\n    color: #999; }\n  .card .content p {\n    margin-bottom: .5em; }\n  .card .footer {\n    padding-bottom: .2em; }\n    .card .footer .reply-input {\n      width: 85%;\n      border: none;\n      outline: none;\n      max-width: 90%;\n      resize: none;\n      height: 3em; }\n\n.ball {\n  width: 15px;\n  height: 15px;\n  border-radius: 100%;\n  background: #efefef; }\n  .ball.visible {\n    background: #3d7df7; }\n\n.pane-container {\n  height: 100%;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  line-height: 0; }\n  .pane-container .magin-size {\n    margin: 0 0 16px 0; }\n  .pane-container .pane {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    width: 100%;\n    background-attachment: scroll;\n    background-size: 100% 100%;\n    background-position: center; }\n\n.pane-container.transition {\n  -webkit-transition: left .4s ease-in-out;\n  transition: left .4s ease-in-out; }\n\n.icon {\n  font-size: 3em;\n  color: #cccccc;\n  padding-right: 1rem;\n  cursor: pointer; }\n\n@media (max-width: 600px) {\n  .pane {\n    width: calc(100% + 32px);\n    margin: 16px 0; } }\n`]\r\n})\r\nexport class WallItemComponent extends AutoDestroy\r\n  implements OnInit, AfterViewInit {\r\n  // po文內容\r\n  @Input() post: IPost;\r\n\r\n  // 刪除玩要傳出去的output\r\n  @Output() deleteAction = new EventEmitter();\r\n\r\n  textContent: string;\r\n\r\n  @ViewChildren('articleList') articleList: QueryList<ElementRef>;\r\n\r\n  constructor(private _wallItemService: WallItemService) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ngAfterViewInit() {\r\n    this.getHeight();\r\n  }\r\n\r\n  @HostListener('window:resize', ['$event'])\r\n  private onResize(event) {\r\n    this.getHeight();\r\n  }\r\n\r\n  // 刪除的funtion\r\n  deleteItem() {\r\n    this._wallItemService\r\n      .deleteItem(this.post.id)\r\n      .takeUntil(this._destroy$)\r\n      .subscribe(x => {\r\n        this.deleteAction.emit(this.post);\r\n      });\r\n  }\r\n\r\n  // 回文\r\n  reply() {\r\n    // 塞好要新增的資訊\r\n    const info: IPostInfo = {\r\n      postId: this.post.id,\r\n      userId: 'kevinwang6303',\r\n      content: this.textContent\r\n    };\r\n    this._wallItemService\r\n      .replyItem([], info)\r\n      .takeUntil(this._destroy$)\r\n      .subscribe((data: IPost) => {\r\n        this.post.reply.push(data);\r\n        this.textContent = '';\r\n      });\r\n  }\r\n\r\n  getHeight() {\r\n    this.articleList.forEach(x => {\r\n      // set height\r\n      x.nativeElement.style.height = x.nativeElement.style.width;\r\n    });\r\n  }\r\n}\r\n"]}